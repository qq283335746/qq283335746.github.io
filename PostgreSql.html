<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta
      charset="UTF-8" />
    <title>Yibi Chen 关于PostgreSql使用与问题集锦</title>
    <meta
      name="Generator"
      content="PowerTools for Open XML" />
    <style>span { white-space: pre-wrap; }
h1.pt-a5 {
    margin-top: 12pt;
    margin-bottom: 3pt;
    text-align: center;
    font-family: 宋体;
    font-size: 16pt;
    line-height: 108%;
    margin-left: 0;
    margin-right: 0;
}
span.pt-a0 {
    font-family: 宋体;
    font-size: 16pt;
    font-style: normal;
    font-weight: bold;
    margin: 0;
    padding: 0;
}
span.pt-a0-000000 {
    font-family: 'Cambria', 'serif';
    font-size: 16pt;
    font-style: normal;
    font-weight: bold;
    margin: 0;
    padding: 0;
}
p.pt-a {
    text-align: justify;
    font-family: Calibri;
    font-size: 10.5pt;
    line-height: 108%;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-000001 {
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
p.pt-000002 {
    margin-left: 0.29in;
    text-indent: -0.29in;
    text-align: justify;
    font-family: Calibri;
    font-size: 14pt;
    line-height: 108%;
    margin-top: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-000003 {
    font-family: Calibri;
    font-size: 14pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
    display: inline-block;
    text-indent: 0;
    width: 0.292in;
}
span.pt-a0-000004 {
    font-family: Calibri;
    font-size: 14pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
p.pt-a-000005 {
    line-height: 14.3pt;
    text-align: left;
    background: #1E1E1E;
    font-family: Consolas;
    font-size: 10.5pt;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-000006 {
    color: #D4D4D4;
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
p.pt-a-000007 {
    line-height: 14.3pt;
    text-align: left;
    background: #1E1E1E;
    font-family: 宋体;
    font-size: 10.5pt;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-a0-000008 {
    color: #D4D4D4;
    font-family: 宋体;
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
span.pt-a0-000009 {
    color: #D4D4D4;
    font-family: Consolas;
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
p.pt-a-000010 {
    line-height: 14.3pt;
    text-align: left;
    background: #1E1E1E;
    font-family: Calibri;
    font-size: 10.5pt;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
p.pt-a-000011 {
    text-align: justify;
    font-family: Calibri;
    font-size: 14pt;
    line-height: 108%;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-000012 {
    font-size: 14pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
</style>
  </head>
  <body>
    <div>
      <h1
        dir="ltr"
        class="pt-a5">
        <span
          lang="zh-CN"
          class="pt-a0">数据库之</span>
        <span
          class="pt-a0-000000">PostgreSql</span>
      </h1>
      <p
        dir="ltr"
        class="pt-a">
        <span
          xml:space="preserve"
          class="pt-000001"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-000002">
        <span
          lang="zh-CN"
          class="pt-000003">1、</span>
        <span
          lang="zh-CN"
          class="pt-a0-000004">环境搭建</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">当前使用系统：Ubuntu18.04</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">How To Install and Use PostgreSQL on Ubuntu 18.04：</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">How to Set the Default User Password in PostgreSQL：</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">https://chartio.com/resources/tutorials/how-to-set-the-default-user-password-in-postgresql/</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">Success. You can now start the database server using:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">/usr/lib/postgresql/10/bin/pg_ctl -D /var/lib/postgresql/10/main -l logfile start</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">Ver Cluster Port Status Owner    Data directory              Log file</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">10  main    5432 down   postgres /var/lib/postgresql/10/main /var/log/postgresql/postgresql-10-main.log</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">postgresql config path: /etc/postgresql/10/main</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">远程连接配置：</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">1.修改postgresql.conf文件，将数据库服务器的监听模式修改为监听所有主机发出的连接请求。</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">改为：listen_addresses='*'</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">2.修改pg_hba.conf文件，配置用户的访问权限</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">添加一行 host   all    all   0.0.0.0/0    md5</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">3.重启postgresql服务：sudo service postgresql restart</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">sudo -i -u postgres</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000007">
        <span
          lang="zh-CN"
          class="pt-a0-000008">修改密码：</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          class="pt-a0-000009">$ sudo -u postgres psql postgres</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000010">
        <span
          class="pt-a0-000009">postgres=# \password postgres</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000005">
        <span
          xml:space="preserve"
          class="pt-000006"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000011">
        <span
          xml:space="preserve"
          class="pt-000012"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a">
        <span
          xml:space="preserve"
          class="pt-000001"> </span>
      </p>
    </div>
  </body>
</html>