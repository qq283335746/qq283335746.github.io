<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta
      charset="UTF-8" />
    <title>Yibi Chen 分布式架构之Apollo（阿波罗）配置中心</title>
    <meta
      name="Generator"
      content="PowerTools for Open XML" />
    <style>span { white-space: pre-wrap; }
h1.pt-a3 {
    margin-top: 12pt;
    margin-bottom: 3pt;
    text-align: center;
    font-family: 宋体;
    font-size: 16pt;
    line-height: 108%;
    margin-left: 0;
    margin-right: 0;
}
span.pt-a0 {
    font-family: 宋体;
    font-size: 16pt;
    font-style: normal;
    font-weight: bold;
    margin: 0;
    padding: 0;
}
p.pt-a {
    text-align: justify;
    font-family: Calibri;
    font-size: 10.5pt;
    line-height: 108%;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-000000 {
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
p.pt-a-000001 {
    line-height: 14.3pt;
    text-align: left;
    background: #1E1E1E;
    font-family: Consolas;
    font-size: 10.5pt;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-000002 {
    color: #D4D4D4;
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
span.pt-a0-000003 {
    color: #D4D4D4;
    font-family: Consolas;
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
p.pt-a-000004 {
    line-height: 14.3pt;
    text-align: left;
    background: #1E1E1E;
    font-family: 宋体;
    font-size: 10.5pt;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-a0-000005 {
    color: #D4D4D4;
    font-family: 宋体;
    font-size: 10.5pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
span.pt-a0-000006 {
    color: #569CD6;
    font-family: Consolas;
    font-size: 10.5pt;
    font-style: normal;
    font-weight: bold;
    margin: 0;
    padding: 0;
}
p.pt-a4 {
    margin-left: 0.29in;
    text-indent: 0.00in;
    text-align: justify;
    font-family: Calibri;
    font-size: 14pt;
    line-height: 108%;
    margin-top: 0;
    margin-right: 0;
    margin-bottom: .001pt;
}
span.pt-000007 {
    font-size: 14pt;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
}
</style>
  </head>
  <body>
    <div>
      <h1
        dir="ltr"
        class="pt-a3">
        <span
          lang="zh-CN"
          class="pt-a0">分布式架构之Apollo（阿波罗）配置中心</span>
      </h1>
      <p
        dir="ltr"
        class="pt-a">
        <span
          xml:space="preserve"
          class="pt-000000"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">system requirements: ubuntu18.04 x64</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">Step1  Install Java:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">https://askubuntu.com/questions/84483/how-to-completely-uninstall-java:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">apt list installed |grep java</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">java 8:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo apt install openjdk-8-jdk</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo apt install openjdk-8-jre</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">或 sudo apt install java-1.8.0-openjdk.x86_64</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-on-ubuntu-18-04:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">1、sudo apt install default-jre</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">2、java -version</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">3、sudo apt install default-jdk</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">4、javac -version</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">uninstall Java:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo dpkg --list | grep -i jdk</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo apt-get purge openjdk*</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">说明：经测试，Apollo（阿波罗）不适合安装java 10</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">Step2 Install Maven:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">https://linuxize.com/post/how-to-install-apache-maven-on-ubuntu-18-04/:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo apt update</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo apt install maven</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">mvn -version</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">Step3  Install MySQL:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-18-04:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo apt update</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo apt install mysql-server</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">Step4 Install Apollo（阿波罗）:</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">新建根目录：/Publish/CtripcorpApollo</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">apollo Releases：https://github.com/ctripcorp/apollo/releases</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">sudo wget https://github.com/ctripcorp/apollo/archive/v1.3.0.tar.gz（v1.3.0即是apollo Releases发布的最新版本）</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">tar zxvf v1.3.0.tar.gz</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">在上述根目录下新建目录：apollo-configservice、apollo-adminservice、apollo-portal、Logs</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">打开编辑apollo-1.3.0/scripts/build.sh文件，将</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000006"># apollo config db info、# apollo portal db info、# meta server url 填写自己服务器的相应信息，</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">打包，运行：apollo-1.3.0/scripts/build.sh</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">复制：</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">apollo-1.3.0/apollo-configservice/target/apollo-configservice-1.3.0-github.zip =》 /Publish/CtripcorpApollo/apollo-configservice</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">apollo-1.3.0/apollo-adminservice/target/apollo-adminservice-1.3.0-github.zip =》 /Publish/CtripcorpApollo/apollo-adminservice</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          class="pt-a0-000003">apollo-1.3.0/apollo-portal/target/apollo-portal-1.3.0-github.zip =》 /Publish/CtripcorpApollo/apollo-portal</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">解压缩上述三个xxx-1.3.0-github.zip文件，并分别打开scripts/startup.sh，修改LOG_DIR=//Publish/CtripcorpApollo/Logs</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000004">
        <span
          lang="zh-CN"
          class="pt-a0-000005">运行scripts/startup.sh即可。</span>
      </p>
      <p
        dir="ltr"
        class="pt-a-000001">
        <span
          xml:space="preserve"
          class="pt-000002"> </span>
      </p>
      <p
        dir="ltr"
        class="pt-a4">
        <span
          xml:space="preserve"
          class="pt-000007"> </span>
      </p>
    </div>
  </body>
</html>